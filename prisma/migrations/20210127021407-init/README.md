# Migration `20210127021407-init`

This migration has been generated by Matt Zuzolo at 1/26/2021, 9:14:07 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE UNIQUE INDEX "Producer.name_regionId_unique" ON "public"."Producer"("name", "regionId")

CREATE UNIQUE INDEX "Producer.name_countryId_unique" ON "public"."Producer"("name", "countryId")

CREATE UNIQUE INDEX "Region.name_countryId_unique" ON "public"."Region"("name", "countryId")

CREATE UNIQUE INDEX "Whisky.name_producerId_unique" ON "public"."Whisky"("name", "producerId")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210127014928-init..20210127021407-init
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -25,8 +25,11 @@
   producer    Producer  @relation(fields: [producerId], references: [id])
   styleId  String?
   style    Style?  @relation(fields: [styleId], references: [id])
+
+  // Unique constraints
+  @@unique([name, producerId])
 }
 model Style {
   id String @id @default(uuid())
@@ -53,8 +56,11 @@
   country    Country  @relation(fields: [countryId], references: [id])
   regionId  String?
   region    Region?  @relation(fields: [regionId], references: [id])
+
+  @@unique([name, regionId])
+  @@unique([name, countryId])
 }
 model Region { // Islay, Kentucky
   id String @id @default(uuid())
@@ -71,8 +77,10 @@
   // THIS IS HOW YOU GET THE INCLUDE FIELD WHEN "EAGAR LOADING"
   // https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-client/field-selection#include
   countryId  String
   country    Country  @relation(fields: [countryId], references: [id])
+
+  @@unique([name, countryId])
 }
 model Country { // Scotland, Ireland, USA
   id String @id @default(uuid())
```


