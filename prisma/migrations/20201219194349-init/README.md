# Migration `20201219194349-init`

This migration has been generated by Matt Zuzolo at 12/19/2020, 2:43:49 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Whisky" ADD COLUMN "abv" integer   ,
ADD COLUMN "styleId" text   

CREATE TABLE "public"."Style" (
"id" text   NOT NULL ,
"name" text   NOT NULL DEFAULT E'Single malt scotch whisky',
"shortName" text   NOT NULL DEFAULT E'Scotch whisky',
"regionId" text   ,
"countryId" text   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."Style" ADD FOREIGN KEY ("regionId")REFERENCES "public"."Region"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Style" ADD FOREIGN KEY ("countryId")REFERENCES "public"."Country"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Whisky" ADD FOREIGN KEY ("styleId")REFERENCES "public"."Style"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201219182206-init..20201219194349-init
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -16,14 +16,32 @@
   name String
   blended Boolean
   age Int? // Maybe default to zero?
+  
+  abv Int? // we might not have this information
   // Relationship
   producerId  String
   producer    Producer  @relation(fields: [producerId], references: [id])
+  
+  styleId  String?
+  style    Style?  @relation(fields: [styleId], references: [id])
 }
+model Style {
+  id String @id @default(uuid())
+  name String @default("Single malt scotch whisky") // "Single malt scotch whisky", "Kentucky straight bourbon whiskey"
+  shortName String @default("Scotch whisky") // "Scotch whisky", "Bourbon whiskey" 
+  
+  // Relationship
+  regionId  String?
+  region    Region?  @relation(fields: [regionId], references: [id])
+
+  countryId  String
+  country    Country  @relation(fields: [countryId], references: [id])
+}
+
 model Producer { // The Balvenie, Lagavulin, Buffalo Trace
   id String @id @default(uuid())
   createdAt  DateTime  @default(now())
```


